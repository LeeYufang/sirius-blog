<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><h1 id="Customizediagramswithimages">Customize diagrams with images</h1><p>Continuing from the example of our <a href="http://melb.enix.org/sirius/the_tree_layout_secret">previous blog post</a> on House of Cards, we&#8217;ll see today how one can customize the elements of diagrams by using pictures.</p><h2 id="Perdiagraminstancecustomization">Per-diagram instance customization</h2><p>In a Sirius based editor, the style of each diagram element can be customized. This customization can be applied from:</p><ul><li>the tool bar:</li></ul><p><img border="0" src="./images/toolbar.png"/> </p><ul><li>the <code>Appearance</code> tab of the property view: </li></ul><p><img border="0" src="./images/appearance.png"/> </p><ul><li>the <code>Diagram</code> menu:</li></ul><p><img border="0" src="./images/diagram.png"/> </p><ul><li>the contextual menu <code>Format</code>:</li></ul><p><img border="0" src="./images/format.png"/> </p><p>The elements you can customize are:</p><ul><li>container: background color, background style, border size, foreground color, label alignment, label size, label format and workspace image.</li><li>node: border size, color, label alignment, format, position, size and workspace image.</li><li>edge: the folding style, the color, the label alignment, format, position and size, the line and routing style, the size and the target and source arrow.</li></ul><p>If we set a workspace image on the <em>Influence</em> diagram resulting from the <a href="http://melb.enix.org/sirius/the_tree_layout_secret">tree layout blog post</a>, we are able to see Frank Underwood&#8217;s face instead of a simple white square.<br/><img border="0" src="./images/set_image_on_existing_diag.png"/> </p><p>These customizations can be reset using:</p><ul><li>the <code>Reset style customization</code> button available in the <code>Appearance</code> tab of the property view :</li></ul><p><img border="0" src="./images/appearance_reset.png"/>  </p><ul><li>in the diagram editor tool bar :</li></ul><p><img border="0" src="./images/toolbar_reset.png"/></p><p>Thanks to this feature each user can customize existing diagrams in any Sirius based modeler. The problem with this solution is that if you create another diagram, the default style will be applied, and we would no longer see Frank&#8217;s beautiful face. This method is only useful to customize a specific instance of a diagram.</p><h2 id="Usingworkspaceimagestyle">Using workspace image style</h2><p>If instead of having customization specific to a given instance, we would like all diagrams of a certain type, what we need to do is to provide the image during the diagram specification phase.</p><p>In order to get the image on every new diagram, we need to provide it at the diagram specification phase. To do so, after reopening the <code>houseofcards.odesign</code>, we need to update the <em>Influence</em> diagram description to use a workspace image in a conditional style to represent Frank.<br/><img border="0" src="./images/conditional_styles_specification.png"/> </p><p>From now on, everytime an <em>Influence</em> diagram is created, Frank&#8217;s and Linda&#8217;s faces will automatically be associated to the relevant diagram elements.<br/><img border="0" src="./images/conditional_styles.png"/></p><p>What is problematic with this solution is that we need to create a conditional style for each character. As there are around 50 different characters in the House of Cards series, it is not a very practical solution.</p><h2 id="Specifystylecustomimages">Specify style custom images</h2><p>Fortunately, Sirius provides another way to achieve that. We want to provide all the images in a specific folder and have Sirius select the right one according to the picture&#8217;s name. This can easily be done by using the <code>style customizations</code>.<br/>We modify our mapping to specify a workspace image style.<br/><img border="0" src="./images/style_custo_mapping.png"/></p><p>We provide a new style customization:<br/><img border="0" src="./images/style_custo_specification.png"/></p><p>And a new property customization by expression:<br/><img border="0" src="./images/style_custo_property_specification.png"/></p><p>All the pictures are stored in an <code>images</code> folder.<br/><img border="0" src="./images/style_custo_design_images.png"/></p><p>Then we specify that the style to customize is the workspace image previously defined.<br/>This style customization must be applied on <code>PersonWorkspaceImage</code> and we want to customize the <code>workspacePath</code> property:<br/><img border="0" src="./images/style_custo_property_specification2.png"/> </p><p>To retrieve the value of the <code>workspacePath</code>, we call a Java service <code>getImage</code> which returns the image path from the person name:<br/><img border="0" src="./images/style_custo_java.png"/></p><p>Finally, when we reopen our example, we get a shinier diagram this time with everybody associated to his picture.<br/><img border="0" src="./images/style_custo_property.png"/></p><p>And now if I update the name of a character, I get automatically the associated picture. John Doe is represented by the default image and we see Zoe&#8217;s lovely face.<br/><img border="0" src="./images/style_custo_update_name.png"/></p><p>With the next Sirius 3.0 version, if you use images with a transparent background, the edges will follow the image.<br/><img border="0" src="./images/Sirius_3_0_Edges_And_Transparency.png"/></p></body></html>